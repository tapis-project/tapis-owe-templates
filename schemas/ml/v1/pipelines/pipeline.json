{
    "description": "Pulls text from a web page and runs sentiment analysis",
    "execution_profile": {
        "duplicate_submission_policy": "deny"
    },
    "params": {
        "TAPIS_BASE_URL": {
            "type": "string",
            "required": true
        },
        "TAPIS_USERNAME": {
            "type": "string",
            "required": true
        },
        "TAPIS_PASSWORD": {
            "type": "string",
            "required": true
        }
    },
    "env": {
        "LOCKFILE_FILENAME": {
            "type": "string",
            "value": "TAPIS_ETL_MANIFEST.lock"
        },
        "TAPIS_SYSTEM_FILE_REF_EXTENSION": {
            "type": "string",
            "value": "TapisSystemFile.json"
        }
    },
    "tasks": [
        {
            "id": "tapis-authenticate",
            "description": "Authenticates with Tapis",
            "type": "template",
            "uses": {
                "name": "tapis/login@latest",
                "source": {
                    "url": "https://github.com/tapis-project/tapis-workflows-task-templates.git",
                    "branch": "master"
                }
            },
            "depends_on": [],
            "input": {
                "TAPIS_BASE_URL": {
                    "value_from": {
                        "args": "TAPIS_BASE_URL"
                    }
                },
                "TAPIS_USERNAME": {
                    "value_from": {
                        "args": "TAPIS_USERNAME"
                    }
                },
                "TAPIS_PASSWORD": {
                    "value_from": {
                        "args": "TAPIS_PASSWORD"
                    }
                }
            },
            "conditions": []
        },
        {
            "id": "start-pod",
            "description": "Starts a inference server for the provided model model",
            "type": "template",
            "uses": {
                "name": "tapis/etl/reduce@v1beta",
                "source": {
                    "url": "https://github.com/tapis-project/tapis-workflows-task-templates.git",
                    "branch": "master"
                }
            },
            "depends_on": [],
            "input": {
                "POD": {
                    "value": "FINISHED"
                },
                "MODEL_ID": {

                }
            },
            "conditions": [
                {
                    "eq": [
                        {"args": "RESUBMIT_OUTBOUND"},
                        null
                    ]
                }
            ]
        },
        {
            "id": "scrape-web-page",
            "description": "",
            "type": "template",
            "depends_on": [
                {
                    "id": "tapis-authenticate",
                    "can_fail": false,
                    "can_skip": false
                }
            ],
            "uses": {
                "name": "tapis/ml/srape-web-page@v1",
                "source": {
                    "url": "https://github.com/tapis-project/tapis-workflows-task-templates.git",
                    "branch": "master"
                }
            },
            "input": {
                "URL": {
                    "value_from": {
                        "args": "URL"
                    }
                }
            },
            "conditions": []
        }
    ]
}